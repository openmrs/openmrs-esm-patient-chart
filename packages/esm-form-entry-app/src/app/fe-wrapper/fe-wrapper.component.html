<div *ngIf="loadingError" class="form-container">
  <div class="bx--tile error-tile">
    <h4 class="heading">There was an error with this form</h4>
    <p class="helperText">
      Try opening another form
    </p>
    <p class="separator">or</p>
    <button class="bx--btn bx--btn--sm bx--btn--ghost" (click)="closeForm()">
      Close this panel
    </button>
  </div>
</div>
<div *ngIf="formState !== 'submitted'" [ngClass]="{'error': formState === 'readyWithValidationErrors'}">
  <div class="content">
    <div *ngIf="formState === 'ready' || formState === 'readyWithValidationErrors' || formState === 'submitting' || formState === 'submissionError'" class="form-container">
      <div>
        <form class="bx--form no-padding" *ngIf="form" [formGroup]="form.rootNode.control">
          <form-renderer [labelMap]="labelMap" [node]="form.rootNode"></form-renderer>
        </form>
      </div>
      <div class="bx-btn--set button-set">
        <button class="bx--btn bx--btn--secondary" (click)="closeForm()" type="button">Discard</button>
        <button [disabled]="formState === 'submitting'" class="bx--btn bx--btn--primary" (click)="onSubmit()" type="submit">
          <span *ngIf="formState !== 'submitting'">Save and close</span>
          <loader *ngIf="formState === 'submitting'" loadingMessage="Submitting"></loader>
        </button>
      </div>
    </div>
  </div>
</div>

<div *ngIf="formState === 'loading'" class="loader-container">
  <loader class="loader" loadingMessage="Loading..."></loader>
</div>
