<div class="error-text">{{ loadingError }}</div>
<div *ngIf="!formSubmitted" [ngClass]="{'error': hasValidationErrors}">
  <div class="content" (click)="onErrorPanelLostFocus()">
    <div *ngIf="!isLoading" class="form-container">
      <div>
        <h6 *ngIf="singleSpaProps.encounterUuid" class="encounterHeader">Encounter date time {{encounterDate}} @
          {{encounterTime}}</h6>
        <form class="bx--form no-padding" *ngIf="formSchema" [formGroup]="form.rootNode.control">
          <form-renderer [node]="form.rootNode"></form-renderer>
        </form>
      </div>
      <div class="bx-btn--set button-set">
        <button class="bx--btn bx--btn--secondary" (click)="closeForm()" type="button">Discard</button>
        <button [disabled]="isSubmitting" class="bx--btn bx--btn--primary" (click)="onSubmit($event)" type="submit">
          <span *ngIf="!isSubmitting">Save and close</span>
          <loader *ngIf="isSubmitting" loadingMessage="Submitting"></loader>
        </button>
      </div>
    </div>
  </div>
</div>

<div *ngIf="isLoading" class="loader-container">
  <loader class="loader" loadingMessage="Loading..."></loader>
</div>